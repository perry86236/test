<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>世界災難</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
</head>

<body>
<section id="h.6b2b0d931b2d5404_1" class="yaqOZd LB7kq cJgDec nyKByd O13XJf" style=""><div class="Nu95r"><div class="IFuOkc" style="background-position: center center; background-image: url(http://perry86236.github.io/test/pic.jpg); background-size: cover;" jsname="LQX2Vd"></div></div><div class="mYVXT"><div class="LS81yb VICjCf j5pSsc db35Fc" tabindex="-1"><div class="hJDwNd-AhqUyc-ibL1re Ft7HRd-AhqUyc-ibL1re JNdkSc SQVYQc L6cTce-purZT L6cTce-pSzOP"><div class="JNdkSc-SmKAyb LkDMRd"><div class="" jscontroller="sGwD4d" jsaction="zXBUYb:zTPCnb;zQF9Uc:Qxe3nd;" jsname="F57UId"></div></div></div><div class="hJDwNd-AhqUyc-OiUrBf Ft7HRd-AhqUyc-OiUrBf purZT-AhqUyc-II5mzb ZcASvf-AhqUyc-II5mzb pSzOP-AhqUyc-qWD73c Ktthjf-AhqUyc-qWD73c JNdkSc SQVYQc yYI8W HQwdzb"><div class="JNdkSc-SmKAyb LkDMRd"><div class="" jscontroller="sGwD4d" jsaction="zXBUYb:zTPCnb;zQF9Uc:Qxe3nd;" jsname="F57UId"><div class="oKdM2c ZZyype Kzv0Me"><div id="h.6b2b0d931b2d5404_4" class="hJDwNd-AhqUyc-OiUrBf Ft7HRd-AhqUyc-OiUrBf jXK9ad D2fZ2 zu5uec OjCsFc dmUFtb"><div class="jXK9ad-SmKAyb"><div class="tyJCtd mGzaTb Depvyb baZpAe lkHyyc"><h1 id="h.dz7f3gkwqya1" dir="ltr" class="zfr3Q duRjpb CDt4Ke " style="text-align: center;"><span class="C9DxTc " style="">世界災難</span><span class="C9DxTc " style=""><br></span><span class="C9DxTc " style="">新聞</span></h1></div></div></div></div><div class="oKdM2c ZZyype"><div id="h.6b2b0d931b2d5404_6" class="hJDwNd-AhqUyc-OiUrBf Ft7HRd-AhqUyc-OiUrBf jXK9ad D2fZ2 zu5uec wHaque g5GTcb"><div class="jXK9ad-SmKAyb"><div class="tyJCtd mGzaTb Depvyb baZpAe"><p dir="ltr" class="zfr3Q CDt4Ke " style="text-align: center;"><span class="C9DxTc " style="">關心了解週邊的眾生，以慈悲心設想如何幫助眾生。</span></p></div></div></div></div></div></div></div><div class="hJDwNd-AhqUyc-ibL1re Ft7HRd-AhqUyc-ibL1re JNdkSc SQVYQc L6cTce-purZT L6cTce-pSzOP"><div class="JNdkSc-SmKAyb LkDMRd"><div class="" jscontroller="sGwD4d" jsaction="zXBUYb:zTPCnb;zQF9Uc:Qxe3nd;" jsname="F57UId"></div></div></div></div></div></section>

  <div id="app">

    
    <div class="container" >
      <div class="row">
        <div class="text-danger font-weight-bold" v-text="loading_text+text_point" v-if="data.length==0"></div>
        <div class="col-12" v-else>
          <div v-for="item in data">
            <div v-text="item.YMD"></div>
            <table class="table table-sm table-striped">
              <tbody>
                <tr v-for="sub_item in item.data" >
                  <td><a  v-text="sub_item.text" :href="sub_item.link"></a></td>
                </tr>
              </tbody>
            </table>
            
            <hr style="filter: progid:dximagetransform.microsoft.shadow(color:#987cb9,direction:145,strength:15)" width="90%"
              color="#987cb9" size=1>
          </div>
        </div>
      </div>
    </div>

    



    <!-- <div>{{msg}}</div> -->
  </div>
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/scripts.js"></script>
</body>


<script type="module">


  import { createApp } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'

  createApp({
    data() {
      return {
        data: [], msg: "", loading_text: "資料系統查詢中",text_point:""
      }
    },
    computed: {


    },

    methods: {
      sort_date(data) {
        data = data.sort((a, b) => {
          if (a.YMD > b.YMD) {
            return -1;
          }
        });
        return data
      },
      async get_data() {
        //共修4
        let url = "https://script.google.com/macros/s/AKfycbzQkLD390RC_2jR_bW_5PYeyaznoP4mg7N3s4E0Kkzyfds0yxDY_7Ru-9lwSccZodmJ/exec"
        this.data = []
        //if (!!this.name) {
          this.msg = this.loading_text
          await axios.get(url)
            .then((response) => {
              //console.log(response.data)
              this.data = this.sort_date(response.data).map(e => {
                return e
              })
              // let data=this.sort_date(response.data)
              // this.data4=data.map(e=>{
              //     e.item=e.item.replace(/、/g,"\n")
              //     return e
              // })

              this.msg = ""
            })
            .catch((error) => {
              console.log(error)
              this.msg = this.err_text
            })
        //}
      },
    },
    mounted() {
      setInterval(() => {
        let date = new Date()
        let sec = date.getSeconds() % 4 + 1
        this.text_point = "...".repeat(sec)
      }, 1000)
      

    },
    async created() {
      //this.get_data()
      await this.get_data()



    }
  }).mount('#app')
</script>

</html>
